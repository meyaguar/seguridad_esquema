# ğŸ“Œ Proyecto: Esquema de Seguridad en Bases de Datos

## ğŸ“‚ **Estructura del Proyecto**

```
/seguridad_esquema/
â”‚â”€â”€ /config/
â”‚   â”œâ”€â”€ database.php         # ConfiguraciÃ³n de conexiÃ³n a la base de datos (usando PDO)
â”‚â”€â”€ /backup/
â”‚   â”œâ”€â”€ backup.php           # Script para generar copias de seguridad cifradas de la BD
â”‚   â”œâ”€â”€ restore.php          # Script para restaurar copias de seguridad cifradas de la BD
â”‚â”€â”€ /encryption/
â”‚   â”œâ”€â”€ aes_encryption.php   # ImplementaciÃ³n de cifrado y descifrado AES-256-CBC
â”‚   â”œâ”€â”€ sha256_hash.php      # GeneraciÃ³n y verificaciÃ³n de hashes con SHA-256
â”‚â”€â”€ /db_scripts/
â”‚   â”œâ”€â”€ schema.sql           # Estructura de la base de datos (subida por el usuario)
â”‚   â”œâ”€â”€ seed.sql             # Datos de prueba iniciales para poblar la base de datos
â”‚â”€â”€ /tests/
â”‚   â”œâ”€â”€ test.backup.php      # Prueba automatizada para la generaciÃ³n de respaldos cifrados
â”‚   â”œâ”€â”€ test.restore.php     # Prueba automatizada para la restauraciÃ³n de respaldos cifrados
â”‚â”€â”€ .env                     # Archivo de configuraciÃ³n de variables de entorno
â”‚â”€â”€ README.md                # DocumentaciÃ³n del proyecto
```

## ğŸš€ **DescripciÃ³n del Proyecto**

Este proyecto implementa un **esquema de seguridad** que combina **copias de seguridad cifradas** y **cifrado de datos**, garantizando la disponibilidad y confidencialidad de la informaciÃ³n en una base de datos MySQL.

- **Las copias de seguridad son cifradas con AES-256-CBC** antes de ser almacenadas.
- **El proceso de restauraciÃ³n descifra automÃ¡ticamente el respaldo** antes de cargarlo en la base de datos.
- **Se implementa verificaciÃ³n de integridad** mediante SHA-256.

## âš™ï¸ **Requisitos**

- PHP 7.4+
- MySQL 5.7+
- OpenSSL habilitado en PHP
- Acceso a lÃ­nea de comandos (CLI)

## ğŸ”§ **ConfiguraciÃ³n**

1. **Clona el repositorio:**

   ```bash
   git clone https://github.com/usuario/seguridad_esquema.git
   cd seguridad_esquema
   ```

2. **Crea el archivo **`.env`** en la raÃ­z del proyecto** con los siguientes valores:

   ```env
   DB_CONNECTION=mysql
   DB_HOST=[localhost o IP]
   DB_PORT=3306
   DB_DATABASE=db_main
   DB_USERNAME=admpos
   DB_PASSWORD=Pos2025!
   DB_CHARSET=utf8mb4
   BACKUP_ENCRYPTION_KEY=ClaveSeguraParaBackup2025
   ```

3. **Ejecuta los scripts SQL para inicializar la base de datos:**

   ```bash
   mysql -u admpos -p db_main < db_scripts/schema.sql
   mysql -u admpos -p db_main < db_scripts/seed.sql
   ```

## ğŸ›  **Uso del Backup y RestauraciÃ³n**

### ğŸ”¹ **Generar un Backup Cifrado**

```bash
php backup/backup.php
```

âœ… Esto crearÃ¡ un archivo cifrado en la carpeta `/backup/` con extensiÃ³n `.enc`.

### ğŸ”¹ **Restaurar un Backup Cifrado**

```bash
php backup/restore.php /ruta/al/backup.enc
```

âœ… Esto descifrarÃ¡ y restaurarÃ¡ el backup en la base de datos.

## ğŸ§ª **Pruebas AutomÃ¡ticas**

### ğŸ”¹ **Probar el Backup**

```bash
php tests/test.backup.php
```

âœ… Ejecuta una prueba automatizada para verificar que el respaldo se genera correctamente.

### ğŸ”¹ **Probar la RestauraciÃ³n**

```bash
php tests/test.restore.php
```

âœ… Restaura automÃ¡ticamente el Ãºltimo backup cifrado disponible.

## ğŸ›¡ **Seguridad Implementada**

- **AES-256-CBC** para cifrar las copias de seguridad.
- **SHA-256** para verificar la integridad de los datos.
- **EliminaciÃ³n automÃ¡tica del backup no cifrado** despuÃ©s del proceso de cifrado.

---

ğŸš€ **Desarrollado por:** YAGUAR, Eduardo

